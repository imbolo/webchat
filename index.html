<!doctype html>
<html>
<head>
	<meta charset="utf8">
	<style type="text/css">
	body {
		background: #def;
	}
	</style>
</head>
<body>
	<input id="inputMsg"/><button onclick="sendMessage()">发送</button>
	<div style="height: 600px; overflow: auto; background: white">
		<ul id="chatContent">
			
		</ul>
	</div>
	
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script>
	  var chatContent = document.getElementById("chatContent");
	  var socket = io.connect('http://localhost');
	  socket.on('news', function (data) {
	    console.log(data);
		var markup = "<li>"+data.msg+"</li>";
		chatContent.innerHTML+=markup;
	  });
	  $('#inputMsg').keydown(function(event){
		  if (event.keyCode == 13) {
		  	 sendMessage();
		  }
	  });
  	  
	  function sendMessage() {
		  socket.emit('EventNewMsg', {msg:$('#inputMsg').val()});
  		  var markup = "<li>"+$('#inputMsg').val()+"</li>";
  		  chatContent.innerHTML+=markup;
		  $('#inputMsg').val("");
	  }
	</script>
</body>
</html>
